---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';

// Get all posts sorted by date (chronological, newest first)
const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="All Articles | Agentforce Vibes">
  <section class="blog-index">
    <div class="container">
      <header class="blog-index__header">
        <h1 class="blog-index__title">All Articles</h1>
        <p class="blog-index__description">
          Browse all our articles on AI agents, automation, and enterprise technology.
        </p>
      </header>
      
      {posts.length > 0 ? (
        <div class="posts-grid">
          {posts.map((post) => (
            <PostCard post={post} />
          ))}
        </div>
      ) : (
        <div class="blog-index__empty">
          <p>No articles yet. Check back soon!</p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>

<style>
  .blog-index {
    padding: var(--space-16) 0 var(--space-20);
  }
  
  .blog-index__header {
    text-align: center;
    margin-bottom: var(--space-12);
  }
  
  .blog-index__title {
    font-size: var(--text-4xl);
    margin-bottom: var(--space-4);
  }
  
  .blog-index__description {
    font-size: var(--text-lg);
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto;
  }
  
  .blog-index__empty {
    text-align: center;
    padding: var(--space-16);
    background-color: var(--color-surface);
    border-radius: var(--radius-xl);
  }
  
  .blog-index__empty p {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    margin: 0;
  }
</style>
