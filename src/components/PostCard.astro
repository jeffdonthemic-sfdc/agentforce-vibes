---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, pubDate, heroImage } = post.data;
const base = import.meta.env.BASE_URL;
---

<article class="post-card">
  <a href={`${base}/blog/${post.slug}`}>
    <div class="post-card__image">
      {heroImage ? (
        <img src={heroImage} alt={title} loading="lazy" />
      ) : (
        <div class="post-card__image-placeholder"></div>
      )}
    </div>
    <div class="post-card__content">
      <h3 class="post-card__title">{title}</h3>
      {description && <p class="post-card__excerpt">{description}</p>}
      <div class="post-card__meta">
        <FormattedDate date={pubDate} />
      </div>
    </div>
  </a>
</article>

<style>
  .post-card a {
    display: flex;
    flex-direction: column;
    height: 100%;
    color: inherit;
    text-decoration: none;
  }
  
  .post-card__image-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--color-gray-300) 0%, var(--color-gray-400) 100%);
  }
  
  [data-theme="dark"] .post-card__image-placeholder {
    background: linear-gradient(135deg, var(--color-gray-700) 0%, var(--color-gray-600) 100%);
  }
</style>
