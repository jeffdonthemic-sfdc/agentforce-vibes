---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';
import SocialShare from '../components/SocialShare.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'blog'>['data'] & {
  readingTime?: string;
};

const { title, description, pubDate, updatedDate, heroImage, readingTime } = Astro.props;
const currentUrl = Astro.url.href;
---

<BaseLayout title={`${title} | Agentforce Vibes`} description={description} image={heroImage}>
  <article class="post">
    <header class="post-header">
      <div class="container">
        <div class="post-header__inner">
          <div class="post-header__meta">
            <FormattedDate date={pubDate} />
            {readingTime && <span>Â·</span>}
            {readingTime && <span>{readingTime}</span>}
          </div>
          <h1 class="post-header__title">{title}</h1>
          {description && <p class="post-header__description">{description}</p>}
        </div>
      </div>
    </header>
    
    {heroImage && (
      <div class="container">
        <div class="post-hero-image">
          <img src={heroImage} alt={title} />
        </div>
      </div>
    )}
    
    <div class="container">
      <div class="post-content">
        <slot />
        
        {updatedDate && (
          <p class="post-updated">
            <em>Last updated on <FormattedDate date={updatedDate} /></em>
          </p>
        )}
        
        <SocialShare url={currentUrl} title={title} />
      </div>
    </div>
  </article>
</BaseLayout>

<style>
  .post-updated {
    margin-top: var(--space-8);
    padding-top: var(--space-4);
    border-top: 1px solid var(--color-border);
    font-size: var(--text-sm);
    color: var(--color-text-muted);
  }
</style>
